version: '3.2'

networks:

  net_worldsibu:
    external:
      name: net_worldsibu

services:
  worldbankdrugstrackerbackendXwl:
    image: worldsibu/convector-example-dsc

    ports:
      - "7788:10100"
      - "9090:9222"

    environment:
      - USERCERT=user1
      - ORGCERT=worldsibusa
      - KEYSTORE=/data/profiles/worldconsortium/public/user1
      - NETWORKPROFILE=/data/profiles/worldconsortium/public/user1/network-profile.yaml
      - CHANNEL=public
      - CHAINCODE=drugstracker
      - COUCHDBVIEW=public_drugstracker
    deploy:
      restart_policy:
        condition: none
    volumes:
      - worldsibusa_data:/data
      - worldsibusa_scripts:/scripts
      - type: bind
        source: /Users/diestrin/Documents/Projects/Sibu/convector-example-drug-supply-chain/@worldsibu/server/dist
        target: /usr/src/app/dist
      - type: bind
        source: /Users/diestrin/Documents/Projects/Sibu/convector-example-drug-supply-chain/@worldsibu/server/node_modules/@worldsibu/convector-example-dsc-cc-drug
        target: /usr/src/app/node_modules/@worldsibu/convector-example-dsc-cc-drug

    networks:
      - net_worldsibu

volumes:
  worldsibusa_data:
  worldsibusa_scripts:
